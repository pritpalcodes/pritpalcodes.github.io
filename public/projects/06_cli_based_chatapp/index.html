<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>GoChat! | Pritpal Singh</title>
<meta name="keywords" content="GO, Command Line Interface">
<meta name="description" content="A CLI Messaging App made with GoLang This is a simple command-line interface (CLI) messaging application written in Go. It allows users to send messages between each other, broadcast messages to all users, and view message logs.
You can run this on replit as well, here.
Key Components User Struct The User struct represents a user with a unique ID and their message log.
type User struct { ID int Log []string } Message Struct The Message struct represents a message with sender ID, receiver ID, and content.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/projects/06_cli_based_chatapp/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.4599eadb9eb2ad3d0a8d6827b41a8fda8f2f4af226b63466c09c5fddbc8706b7.css" integrity="sha256-RZnq256yrT0KjWgntBqP2o8vSvImtjRmwJxf3byHBrc=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/projects/06_cli_based_chatapp/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Pritpal Singh (Alt + H)">Pritpal Singh</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/about_me/" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/blogs" title="Blogs">
                    <span>Blogs</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/projects" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/pritpalcodes.github.io/pritpalsingh-datascience.pdf" title="Resume">
                    <span>Resume</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      GoChat!
    </h1>
    <div class="post-meta"><span title='2024-04-26 01:29:35 +0530 IST'>April 26, 2024</span>&nbsp;Â·&nbsp;512 words

</div>
  </header> 
  <div class="post-content"><hr>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="a-cli-messaging-app-made-with-golang">A CLI Messaging App made with GoLang<a hidden class="anchor" aria-hidden="true" href="#a-cli-messaging-app-made-with-golang">#</a></h1>
<p>This is a simple command-line interface (CLI) messaging application written in Go. It allows users to send messages between each other, broadcast messages to all users, and view message logs.</p>
<p>You can run this on replit as well, <a href="https://replit.com/@pritpalsingh020/ViciousConsiderateTransversal">here</a>.</p>
<h2 id="key-components">Key Components<a hidden class="anchor" aria-hidden="true" href="#key-components">#</a></h2>
<h3 id="user-struct">User Struct<a hidden class="anchor" aria-hidden="true" href="#user-struct">#</a></h3>
<p>The <code>User</code> struct represents a user with a unique ID and their message log.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">User</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ID</span>  <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Log</span> []<span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="message-struct">Message Struct<a hidden class="anchor" aria-hidden="true" href="#message-struct">#</a></h3>
<p>The <code>Message</code> struct represents a message with sender ID, receiver ID, and content.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Message</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">SenderID</span>   <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ReceiverID</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Content</span>    <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="sending-a-message-broadcasting-a-message-to-all-the-remaining-users-and-checking-user-logs">Sending a Message, Broadcasting a message to all the remaining users, and Checking user logs!<a hidden class="anchor" aria-hidden="true" href="#sending-a-message-broadcasting-a-message-to-all-the-remaining-users-and-checking-user-logs">#</a></h3>
<p>The <code>sendMessage</code> function allows users to send messages between two users. It validates user inputs for sender ID, receiver ID, and message content. If the message content is empty, it fetches a random fact from an API.</p>
<p>The <code>broadcastMessage</code> function allows users to broadcast a message to all users except the sender. It validates the sender ID and message content.</p>
<p>The <code>viewMessageLog</code> function allows users to view the message log of a specific user. It validates the user ID and prints the message log.</p>
<h3 id="handling-the-invalid-user-input">Handling the invalid user input!<a hidden class="anchor" aria-hidden="true" href="#handling-the-invalid-user-input">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sendMessage</span>(<span style="color:#a6e22e">reader</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bufio</span>.<span style="color:#a6e22e">Reader</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//error handling for invalid input for a user!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">users</span>[<span style="color:#a6e22e">receiverID</span>]; !<span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Receiver ID does not exist.&#34;</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="fetching-random-facts">Fetching Random Facts<a hidden class="anchor" aria-hidden="true" href="#fetching-random-facts">#</a></h3>
<p>The <code>getRandomFact</code> function fetches a random fact from an API (<code>https://catfact.ninja/fact</code>). It handles errors during the API call and decoding of the response. Implementing this was the favourite part of the assignment.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">getRandomFact</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;https://catfact.ninja/fact&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">url</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Failed to fetch random fact&#34;</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>.<span style="color:#a6e22e">Close</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">factResp</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">NewDecoder</span>(<span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>).<span style="color:#a6e22e">Decode</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">factResp</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Failed to decode random fact response&#34;</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fact</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">factResp</span>[<span style="color:#e6db74">&#34;fact&#34;</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Failed to get random fact&#34;</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fact</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="error-handling">Error Handling<a hidden class="anchor" aria-hidden="true" href="#error-handling">#</a></h2>
<p>The application performs error handling and input validation in various parts:</p>
<ul>
<li>Validating user inputs for sender ID, receiver ID, and user ID.</li>
<li>Handling errors during the conversion of user inputs to integers.</li>
<li>Handling errors during HTTP requests to fetch random facts from the API.</li>
<li>Handling errors during decoding of the JSON response from the API.</li>
</ul>
<h2 id="demo">Demo<a hidden class="anchor" aria-hidden="true" href="#demo">#</a></h2>
<h3 id="testing-regular-options">testing regular options<a hidden class="anchor" aria-hidden="true" href="#testing-regular-options">#</a></h3>
<blockquote>
<p>testing out the option-1 (send message between two users!)</p>
</blockquote>
<p><img loading="lazy" src="https://github.com/pritpalcodes/MyMandap---Assignment/assets/90276050/9b8307fd-f07c-487b-96db-2625ddb3d46a" alt="image"  />
</p>
<blockquote>
<p>option 3, whereby our user 2 is checking its logs, and see the message sent by user 1 earlier!</p>
</blockquote>
<p><img loading="lazy" src="https://github.com/pritpalcodes/MyMandap---Assignment/assets/90276050/0d1d7ddc-3825-4b30-8afd-97bd43e91814" alt="image"  />
</p>
<blockquote>
<p>finally, option 2, broadcasting a message! (here uesr 3 broadcasts a message to all the remaining users)</p>
</blockquote>
<p><img loading="lazy" src="https://github.com/pritpalcodes/MyMandap---Assignment/assets/90276050/1757eb36-d965-4696-9414-168f7070e7dd" alt="image"  />
</p>
<blockquote>
<p>checking the broadcast so received!</p>
</blockquote>
<p><img loading="lazy" src="https://github.com/pritpalcodes/MyMandap---Assignment/assets/90276050/05703521-f325-49ef-8816-e9328be69216" alt="image"  />
</p>
<blockquote>
<p>If empty message -&gt; generate a random fact!</p>
</blockquote>
<p><img loading="lazy" src="https://github.com/pritpalcodes/MyMandap---Assignment/assets/90276050/246ca102-9744-4601-b396-30fa6b201161" alt="image"  />
</p>
<h3 id="testing-for-error-handling">testing for error handling<a hidden class="anchor" aria-hidden="true" href="#testing-for-error-handling">#</a></h3>
<blockquote>
<p>user does NOT exist -&gt; return error message(keep the loop running)</p>
</blockquote>
<p><img loading="lazy" src="https://github.com/pritpalcodes/MyMandap---Assignment/assets/90276050/7317d503-dbe4-49f8-ae60-814f561dac47" alt="image"  />
</p>
<blockquote>
<p>what if the input is INVALID (say user ID is a string?)</p>
</blockquote>
<p>![image](<a href="https://github.com/pritpalcodes/MyMandap---Assignment/assets/90276050/">https://github.com/pritpalcodes/MyMandap---Assignment/assets/90276050/</a>
586c98bf-28ed-4e92-88f7-76a4b8504ba1)</p>
<blockquote>
<h4 id="at-last-we-exit-the-program-and-see-all-the-user-logs-all-at-once-">At last we exit the program and see all the user logs, all at once! :)<a hidden class="anchor" aria-hidden="true" href="#at-last-we-exit-the-program-and-see-all-the-user-logs-all-at-once-">#</a></h4>
</blockquote>
<p><img loading="lazy" src="https://github.com/pritpalcodes/MyMandap---Assignment/assets/90276050/2f5da723-c31d-45d9-9794-9cb71dd4e3ff" alt="image"  />
</p>
<p>If you liked this assignment, you can also check out my other assignments on <a href="https://github.com/pritpal-singh">my GitHub</a> or on my <a href="https://pritpalsingh.in">website</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/go/">GO</a></li>
      <li><a href="http://localhost:1313/tags/command-line-interface/">Command Line Interface</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/projects/01_capec/">
    <span class="title">Â« Prev</span>
    <br>
    <span>CAPEC Based Web Attacks Classifier</span>
  </a>
  <a class="next" href="http://localhost:1313/projects/02_ipl_prob/">
    <span class="title">Next Â»</span>
    <br>
    <span>IPL Win Probability Prediction</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">Pritpal Singh</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
